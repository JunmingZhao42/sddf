// Note: this util.ðŸ¥ž only includes helper functions and constants
// needed for ethernet driver for verification purposes.
// Other functions and constants are included in util2.ðŸ¥ž and
// to be updated later.

#define BIT(nr) (1 << nr)
#define MASK_16         65535
#define BYTE_MASK       255
#define HALF_BIW        (@biw >> 1)

// Returns a % b, asuming b = x^n for some x and n
#define pnk_modulo(result, a, b)        \
    var pnk_modulo_mask = b - 1;        \
    var result = a & pnk_modulo_mask;   \

#define microkit_notify(channel)        \
    @microkit_notify(0,channel,0,0);    \

#define THREAD_MEMORY_RELEASE()         \
    @THREAD_MEMORY_RELEASE(0,0,0,0);    \

#define THREAD_MEMORY_ACQUIRE()         \
    @THREAD_MEMORY_ACQUIRE(0,0,0,0);    \

#define assert(assert_val)              \
    @assert(0,assert_val,0,0);          \

#define microkit_deferred_irq_ack(channel)       \
    @microkit_deferred_irq_ack(0,channel,0,0);   \

#define microkit_deferred_notify(channel)        \
    @microkit_deferred_notify(0,channel,0,0);    \
